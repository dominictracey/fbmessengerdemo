ACC.ajax={_autoload:[],selectPetAjax:function(s,e){var r=$("#select-pet-"+s).parents(".select-pet-wrap"),i=($("#select-pet-"+s),$("#select-pet-"+s).siblings("button"));if(0==r.length||r.hasClass("loading"))return!1;r.addClass("loading");var t={petGuid:e,entryNumber:s};$.ajax({url:"/checkout/multi/select-pet/",method:"POST",type:"POST",dataType:"json",timeout:6e3,contentType:"application/json",processData:!1,data:JSON.stringify(t)}).done(function(e,t,a){!0===e.result?(ACC.ajax.updateEditPetModal(e.pet,s),ACC.ajax.updateInactiveVet(e.pet.veterinarian,s),ACC.ajax.filterPetsOfSameSku(e.pet,s),i.addClass("hasselected"),r.addClass("success"),r.parent().next(".autoship-section").removeClass("hide")):r.parents(".checkout-order-summary-list-items").addClass("error")}).fail(function(e,t,a){r.removeClass("loading").removeClass("success"),r.parents(".checkout-order-summary-list-items").addClass("error")}).always(function(e,t,a){setTimeout(function(){r.removeClass("loading").removeClass("success")},1e3),setTimeout(function(){r.parents(".checkout-order-summary-list-items").hasClass("error")&&location.reload()},3e3)})},updateEditPetModal:function(e,t){if($("#petName_"+t).val(e.name),$("#petSpecies_"+t).val(e.species.code),$("#petBreed_"+t).val(e.breed.code),$("#petweight_"+t).val(e.weight),$("#petveterinarian_"+t).val(e.veterinarian.code),$("#petVeterinarianActive_"+t).val(e.veterinarian.active),$("#petGender_"+t).val(e.gender.code),$("#petAllergy_"+t).val(e.allergies),$("#petmedication_"+t).val(e.medication),$("#petguid_"+t).val(e.guid),e.birthDate){var a=new Date(e.birthDate);$("#petDOB_"+t).val(a.toDateString())}},updateInactiveVet:function(e,t){var a=$("ul.checkout-order-summary-list .checkout-order-summary-list-items").eq(t);void 0!==e&&e.active?a.removeClass("needs-pet-update"):a.addClass("needs-pet-update"),0<$(".inactive-veter").length&&$(".step-body").addClass("hide")},checkoutAutoship:function(r,i){var o=$("#autoship-ferq_"+r).parents(".autoship-section").children(".autoship-options");if(0==o.length||o.hasClass("loading"))return!1;var e={autoShipFlag:i,entryNumber:r};if(i){var t=$("#autoship-ferq_"+r).val();if(void 0===t||""==t){$("#frequency-select-warning_"+r).css("display","block"),$("#choosePaymentType_continue_button").attr("disabled","disabled");var a=$("button[data-id='autoship-ferq_"+r+"']");return console.log(a),a.addClass("error-state"),!1}e.frequency=$("#autoship-ferq_"+r).val()}o.addClass("loading"),$.ajax({url:"/cart/set-autoship-frequency/",method:"POST",type:"POST",dataType:"json",timeout:7e3,contentType:"application/json",processData:!1,data:JSON.stringify(e)}).done(function(e,t,a){if(!0===e.result&&"object"==typeof e.cart?(ACC.ajax.updateCheckoutPrices(e.cart),o.addClass("success"),o.parent().next(".autoship-section").removeClass("hide")):o.parents(".checkout-order-summary-list-items").addClass("error"),$("#frequency-select-warning_"+r).css("display","none"),!i){$("#frequency-select-warning_"+r).css("display","none"),$("#choosePaymentType_continue_button").removeAttr("disabled");var s=$("button[data-id='autoship-ferq_"+r+"']");console.log(s),s.removeClass("error-state")}}).fail(function(e,t,a){o.removeClass("loading").removeClass("success"),o.parents(".checkout-order-summary-list-items").addClass("error")}).always(function(e,t,a){setTimeout(function(){o.removeClass("loading").removeClass("success")},1e3),setTimeout(function(){o.parents(".checkout-order-summary-list-items").hasClass("error")&&location.reload()},3e3)})},updateCheckoutPrices:function(a){if(void 0===a.entries)return!1;$(".checkout-order-summary-list .checkout-order-summary-list-items").each(function(e,t){$(t).find(".col-sm-1:last-child > .price").text(a.entries[e].totalPrice.formattedValue)});var e=$(".cart-totals");e.find(".col-xs-4.cart-totals-right.text-right").eq(0).text(a.subTotal.formattedValue),e.find(".col-xs-4.cart-totals-right.text-right.grand-total").eq(0).text(a.totalPrice.formattedValue)},filterPetsOfSameSku:function(r,e){$("li.duplicate-pet").attr("disabled",!1);var t=$("ul.checkout-order-summary-list > li.checkout-order-summary-list-items").eq(e);if(t){var a=t.find(".thumb > a");if(a){var s=a.attr("href");$('div.details-wrap > div.thumb > a[href="'+s+'"]').not(a).each(function(e,t){var a=$(t).parents(".row.details-wrap").parent().next().children(".add-pet-warp"),s=a.find('option[value="'+r.guid+'"]');s&&a.find(".select-pet-wrap .dropdown-menu.inner > li").eq(s.index()-1).addClass("duplicate-pet").addClass("disabled")})}}}};
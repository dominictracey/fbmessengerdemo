ACC.autocomplete={_autoload:["bindSearchAutocomplete","bindDisableSearch"],bindSearchAutocomplete:function(){var o=!1,r=!1,l=0;$.widget("custom.yautocomplete",$.ui.autocomplete,{_create:function(){var e=this.element.data("options");this._setOptions({minLength:e.minCharactersBeforeRequest,displayProductImages:e.displayProductImages,delay:e.waitTimeBeforeRequest,autocompleteUrl:e.autocompleteUrl,source:this.source}),$.ui.autocomplete.prototype._create.call(this)},options:{cache:{},focus:function(e){return!1},select:function(e,t){window.location.href=t.item.url}},_renderMenu:function(i,e){r=!(o=!1),l=0,enquire.register("screen and (min-width:882px)",{match:function(){r&&($(".site-search").append("<div class='list-container'><ul class='left-list'></ul><div class='right-list-container'><div class='top-result'>Top Results</div><ul class='right-list match-height-context'></ul></div></div>"),r=!(o=!0))},unmatch:function(){$(".list-container").remove(),r=!1}});var s=this;$.each(e,function(e,t){s._renderItemData(i,t)})},_renderItem:function(e,t){var i=".left-list",s=".right-list";if(o||(s=i=e,r=!1),"autoSuggestion"==t.type){var n="<a class='item-link' href='"+t.url+"' ><div class='name'>"+t.value+"</div></a>";return $("<li class='autoSuggestion-item'>").data("item.autocomplete",t).append(n).appendTo(i)}if("productResult"==t.type){var a="<li class='productResult-item match-height-item'>";0==l&&(a="<li class='productResult-item first-item match-height-item'>",l++);var c=a;n="<a class='item-link' href='"+t.url+"' >";return null!=t.image&&(n+="<div class='thumb'><img src='"+t.image+"'  /></div>"),n+="<div class='description-container'><div class='name match-height-element'>"+t.value+"</div>",n+="<div class='price match-height-element'>"+t.price+"</div></div>",n+="</a>",$(c).data("item.autocomplete",t).append(n).appendTo(s)}},_isEventTargetInWidget:function(e){for(var t=!1,i=this.menu.element[0],s=0;s<8;s++)if(e.target===$(".list-container .name")[s]){t=!0;break}return $(e.target).parents(".list-container")[0]&&(t=!0),e.target===this.element[0]||e.target===i||t||$.contains(i,e.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||($(".list-container").remove(),this.close()),isClicked=!1},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?($(".list-container").remove(),this.close(t)):!1!==this._trigger("search",t)?this._search(e):void 0},close:function(e,t){$(".ui-autocomplete").css("display","none")},_suggest:function(e){$(".list-container");$(".list-container").remove();var i=this.menu.element.empty();if(this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),setTimeout(function(){ACC.matchHeightElement.runMatchHeight()},50),i.show(),$(window).resize(function(){var e=$(".list-container"),t=$(".site-search");0===$(".left-list li").length&&500<=e.outerWidth()?e.css("width",500):(e.css("width",t.width()),i.css("width",t.width()))}),this._resizeMenu(),i.position($.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"}),$(window).width()<761){var t=$(window).height()-99+"px";4<=$(".productResult-item").length&&$(".header-container .site-search ul.ui-autocomplete").css("height",t)}0===$(".left-list li").length&&($(".left-list").hide(),$(".list-container").css("width",500),$(".right-list-container").css("width",500))},_resizeMenu:function(){var e=this.menu.element,t=$(".site-search");$(".list-container").css("width",t.width()),e.css("width",t.width())},source:function(e,t){var s=this,n=e.term.toLowerCase();if(n in s.options.cache)return t(s.options.cache[n]);$.getJSON(s.options.autocompleteUrl,{term:e.term},function(e){var i=[];return null!=e.suggestions&&$.each(e.suggestions,function(e,t){i.push({value:t.term,url:ACC.config.encodedContextPath+"/search?text="+t.term,type:"autoSuggestion"})}),null!=e.products&&$.each(e.products,function(e,t){i.push({value:ACC.autocomplete.escapeHTML(t.name),code:t.code,desc:t.description,manufacturer:t.manufacturer,url:ACC.config.encodedContextPath+t.url,price:t.price.formattedValue,type:"productResult",image:null!=t.images&&s.options.displayProductImages?t.images[0].url:null})}),s.options.cache[n]=i,t(i)})}}),$search=$(".js-site-search-input"),0<$search.length&&$search.yautocomplete()},bindDisableSearch:function(){$("#js-site-search-input").keyup(function(e){$(".js_search_button").prop("disabled",""==this.value),"13"==(e.keyCode||e.which)&&$("#js-site-search-input").val($("#js-site-search-input").val().replace(/^\s+/gm,""))}),$("#js-site-search-input").blur(function(){$("#js-site-search-input").val($("#js-site-search-input").val().replace(/^\s+/gm,"")),$(".js_search_button").prop("disabled",""==this.value)})},escapeHTML:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}};
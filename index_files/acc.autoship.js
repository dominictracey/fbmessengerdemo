function saveWarningModal(){$(".edit-schedule-item:visible .save-autoship-btn").first().popover("show");var e=$(".edit-schedule-item:visible .save-autoship-btn").first().offset().top-140;$("html, body").animate({scrollTop:e},400)}function hideSaveWarning(e){$(".edit-schedule-item:visible .save-autoship-btn").first().popover("hide")}function editAutoShip(s,e){if(1<=$(".edit-schedule-item:visible .save-autoship-btn").length&&"activeAutoship"===e)saveWarningModal();else{var t=$("#editAutoShip").val();$.ajax({url:t+$("#guid_"+s).val()+"&entryNo="+s,type:"GET",success:function(e){$("#schedule_"+s).hide(),$("#editable_"+s).html(e).show(),$("#autoship-ferq_"+s).selectpicker("refresh"),$(".cancel-autoship-btn.custom-tooltip").tooltip({trigger:"click"}),$(".pause-autoship-btn.custom-tooltip").tooltip({trigger:"click"});var t=new Date;$("#datepicker_"+s).datepicker({dateFormat:"dd-mm-yy",showButtonPanel:!0,closeText:"<span class='icon icon-remove-gray'></span>",dayNamesMin:["S","M","T","W","T","F","S"],minDate:t,showOtherMonths:!0,selectOtherMonths:!0,beforeShowDay:$.datepicker.noWeekends,onSelect:function(e,t){var a="undefined"==typeof gtmGlobalEvent;if(e!==t.lastVal&&!a){var i="#"+$(this).closest(".edit-schedule-item").attr("id").replace("editable","schedule"),s=$(i).find(".product-name").text(),o=$(i).data("autoshipguid");gtmGlobalEvent("account - manage autoship","next order date",o+" - "+s+" - "+e,"gtm_event")}}}),$("#datepicker_"+s).datepicker("option","dateFormat","mm/dd/yy"),$(".custom-datepicker .icon-pencil").on("click",function(){$(this).parent().find(".form-control").trigger("focus")});var a=$(".schedule-item[data-autoshipguid='"+$("#guid_"+s).val()+"']"),i=$(".schedule-item.edit-schedule-item#editable_"+s);a.addClass("schedule-item-editing"),i.addClass("schedule-item-editing")},error:function(){alert("No Schedule available")}})}}function reactivateRequest(e){$("#schedule_"+e+" .reactivate-hide").removeClass("reactivate-hide").addClass("reactivate-show"),$("#schedule_"+e+" .before-reactivation").hide(),$("#schedule_"+e+" .reacivate-btn").hide()}function stopActivating(e){$("#schedule_"+e+" .reactivate-show").removeClass("reactivate-show").addClass("reactivate-hide"),$("#schedule_"+e+" .before-reactivation").show(),$("#schedule_"+e+" .reacivate-btn").show()}function showShipmentDate(e){$("#datePickDiv_"+e).removeClass("hidden");var t=new Date;$("#scheduleDatepicker_"+e).datepicker({dateFormat:"dd-mm-yy",showButtonPanel:!0,closeText:"<span class='icon icon-remove-gray'></span>",dayNamesMin:["S","M","T","W","T","F","S"],minDate:t,showOtherMonths:!0,selectOtherMonths:!0,beforeShowDay:$.datepicker.noWeekends})}function activateSchedule(o){alert("Hurp.");var e=$("#scheduleDatepicker_"+o).val(),t=$("#guid_"+o).val();$.ajax({url:$("#activateAutoShip").val()+t,data:{entryNo:o,nextShipmentDate:e},type:"GET",success:function(e){$("#schedule_"+o).html(e).show();var t=new Date;$("#autoship-ferq_"+o).selectpicker("refresh"),$("#scheduleDatepicker_"+o).datepicker({dateFormat:"dd-mm-yy",showButtonPanel:!0,closeText:"<span class='icon icon-remove-gray'></span>",dayNamesMin:["S","M","T","W","T","F","S"],minDate:t,showOtherMonths:!0,selectOtherMonths:!0,beforeShowDay:$.datepicker.noWeekends}).datepicker("setDate",t),$("#successMessage").delay(300).fadeIn(),$("#successMessage").delay(7e3).fadeOut();var a=$(".saved-schedule-item.schedule-item[data-autoshipguid='"+$("#guid_"+o).val()+"']"),i=$(".schedule-item.edit-schedule-item#editable_"+o),s=a.prev(".autoship-status-notification-banner");a.removeClass("inactive-schedule-item"),i.removeClass("inactive-schedule-item"),a.remove("schedule-item-editing"),i.remove("schedule-item-editing"),s.hide()},error:function(e){alert("Failed to update schedule")}})}function pauseAutoShip(o){var e=$("#pauseAutoShipUrl").val();$.ajax({url:e+$("#guid_"+o).val()+"&entryNo="+o,type:"GET",success:function(e){$("#schedule_"+o).html(e).show(),$("#editable_"+o).hide();var t=new Date;$("#autoship-ferq_"+o).selectpicker("refresh"),$("#scheduleDatepicker_"+o).datepicker({dateFormat:"dd-mm-yy",showButtonPanel:!0,closeText:"<span class='icon icon-remove-gray'></span>",dayNamesMin:["S","M","T","W","T","F","S"],minDate:t,showOtherMonths:!0,selectOtherMonths:!0,beforeShowDay:$.datepicker.noWeekends}).datepicker("setDate",t),$(".custom-datepicker .icon-pencil").on("click",function(){$(this).parent().find(".form-control").trigger("focus")}),$("#successMessage").delay(300).fadeIn(),$("#successMessage").delay(7e3).fadeOut();var a=$('<div class="row autoship-status-notification-banner" data-autoshipguid="'+$("#guid_"+o).val()+'"><p class="autoship-status">PAUSED</p></div>'),i=$(".schedule-item[data-autoshipguid='"+$("#guid_"+o).val()+"']"),s=$(".schedule-item.edit-schedule-item#editable_"+o);$("#autoShipSchedules").prepend(s),$("#autoShipSchedules").prepend(i),a.insertBefore(i),i.addClass("inactive-schedule-item"),s.addClass("inactive-schedule-item"),i.removeClass("schedule-item-editing"),s.removeClass("schedule-item-editing")},error:function(){alert("No Schedule available")}})}function stopEditing(e){$("#editable_"+e).hide(),$("#schedule_"+e).show()}function saveSchedule(s,e){var t={};t.guid=$("#guid_"+s).val(),t.entryNo=$("#entryNo_"+s).val(),t.frequency=$("#autoship-ferq_"+s).val(),t.nextShipmentDate=$("#datepicker_"+s).val(),t.action=e,$.ajax({url:$("#updateSchedule").val(),data:JSON.stringify(t),type:"POST",contentType:"application/json",success:function(e){$("#schedule_"+s).html(e).show(),$("#editable_"+s).hide(),$("#successMessage").hide(),$("#successMessage").delay(300).fadeIn(),$("#successMessage").delay(7e3).fadeOut();var t=$(".saved-schedule-item.schedule-item[data-autoshipguid='"+$("#guid_"+s).val()+"']"),a=$(".schedule-item.edit-schedule-item#editable_"+s),i=t.prev(".autoship-status-notification-banner");t.removeClass("inactive-schedule-item"),a.removeClass("inactive-schedule-item"),t.remove("schedule-item-editing"),a.remove("schedule-item-editing"),i.hide()},error:function(e){alert("Failed to update schedule")}})}function hideCancelConfirmation(e){$("#editable_"+e+" .cancel-autoship-btn").removeClass("open").tooltip("hide")}function showCancelConfirmation(e){$("#editable_"+e+" .cancel-autoship-btn").hasClass("open")||($("#editable_"+e+" .cancel-autoship-btn").addClass("open").tooltip("show"),$("#editable_"+e+" .pause-autoship-btn").removeClass("open").tooltip("hide"))}function hidePauseConfirmation(e){$("#editable_"+e+" .pause-autoship-btn").removeClass("open").tooltip("hide")}function showPauseConfirmation(e){$("#editable_"+e+" .pause-autoship-btn").hasClass("open")||($("#editable_"+e+" .pause-autoship-btn").addClass("open").tooltip("show"),$("#editable_"+e+" .cancel-autoship-btn").removeClass("open").tooltip("hide"))}$("body").on("click",function(e){$(e.target).hasClass("edit-btn")||0!==$(e.target).parents(".popover.in").length||$(".save-autoship-btn").popover("hide")}),$("body").on("hidden.bs.popover",function(e){$(e.target).data("bs.popover").inState.click=!1}),$("body").on("click",function(e){$(e.target).hasClass("custom-tooltip")||0!==$(e.target).parents(".tooltip.in").length||$(".pause-cancel-autoship .tooltip").tooltip("hide")}),$("body").on("hidden.bs.tooltip",function(e){$(e.target).data("bs.tooltip").inState={click:!1,hover:!1,focus:!1}});
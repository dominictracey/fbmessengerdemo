!function(l){var h="waitForImages";l.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage"]},l.expr[":"].uncached=function(e){if(!l(e).is('img[src!=""]'))return!1;var r=new Image;return r.src=e.src,!r.complete},l.fn.waitForImages=function(i,s,r){var o=0,u=0;if(l.isPlainObject(i)&&(r=i.waitForAll,s=i.each,i=i.finished),i=i||l.noop,s=s||l.noop,r=!!r,!l.isFunction(i)||!l.isFunction(s))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var a=l(this),c=[],e=l.waitForImages.hasImageProperties||[],t=/url\(\s*(['"]?)(.*?)\1\s*\)/g;r?a.find("*").andSelf().each(function(){var i=l(this);i.is("img:uncached")&&c.push({src:i.attr("src"),element:i[0]}),l.each(e,function(e,r){var n,a=i.css(r);if(!a)return!0;for(;n=t.exec(a);)c.push({src:n[2],element:i[0]})})}):a.find("img:uncached").each(function(){c.push({src:this.src,element:this})}),o=c.length,(u=0)===o&&i.call(a[0]),l.each(c,function(e,r){var n=new Image;l(n).bind("load."+h+" error."+h,function(e){if(u++,s.call(r.element,u,o,"load"==e.type),u==o)return i.call(a[0]),!1}),n.src=r.src})})}}(jQuery);
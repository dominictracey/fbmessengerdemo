!function($){var f={url:!1,callback:!1,target:!1,duration:120,on:"mouseover",touch:!0,onZoomIn:!1,onZoomOut:!1,zoomEnableCallBack:!1,zoomEnable:!0,magnify:1,longtouchtimer:function(){},touchduration:500};$.zoom=function(o,t,e,n){var i,u,c,m,a,l,r,s=$(o).css("position"),h=$(t);o.style.position=/(absolute|fixed)/.test(s)?s:"relative",o.style.overflow="hidden",e.style.width=e.style.height="";var f=$("<div class='zoomImg'><div class='zoomImgMask'></div></div>").css({width:e.width*n,height:e.height*n}).appendTo(o);return $(e).appendTo(f),{init:function(){u=$(o).outerWidth(),i=$(o).outerHeight(),t===o?(m=u,c=i):(m=h.outerWidth(),c=h.outerHeight()),a=(e.width-u)/m,l=(e.height-i)/c,r=h.offset()},move:function(o){null==r&&(r={left:0,top:0});var t=o.pageX-r.left,n=o.pageY-r.top;n=Math.max(Math.min(n,c),0),t=Math.max(Math.min(t,m),0),$(e).parent(".zoomImg").css("left",t*-a+"px"),$(e).parent(".zoomImg").css("top",n*-l+"px")}}},$.fn.zoom=function(h){return this.each(function(){var o,t,n,i=$.extend({},f,h||{}),u=i.target||this,c=this,m=$(c),a=document.createElement("img"),e=$(a),l="mousemove.zoom",r=!1,s=!1;(i.url||((o=m.find("img"))[0]&&(i.url=o.data("src")||o.attr("src")),i.url))&&(t=u.style.position,n=u.style.overflow,m.one("zoom.destroy",function(){m.off(".zoom"),u.style.position=t,u.style.overflow=n,e.remove()}),a.onload=function(){var t=$.zoom(u,c,a,i.magnify);function n(o){if($.isFunction(i.zoomEnableCallBack)&&(i.zoomEnable=i.zoomEnableCallBack.call(a)),!i.zoomEnable)return!1;t.init(),t.move(o),$(a).parent(".zoomImg").stop().fadeTo($.support.opacity?i.duration:0,1,!!$.isFunction(i.onZoomIn)&&i.onZoomIn.call(a))}function e(){i.longtouchtimer&&clearTimeout(i.longtouchtimer),$(a).parent(".zoomImg").stop().fadeTo(i.duration,0,!!$.isFunction(i.onZoomOut)&&i.onZoomOut.call(a))}"grab"===i.on?m.on("mousedown.zoom",function(o){1===o.which&&($(document).one("mouseup.zoom",function(){e(),$(document).off(l,t.move)}),i.longtouchtimer=setTimeout(function(){n(o),$(document).on(l,t.move)},i.touchduration),o.preventDefault())}):"click"===i.on?m.on("click.zoom",function(o){return r?void 0:(r=!0,n(o),$(document).on(l,t.move),$(document).one("click.zoom",function(){e(),r=!1,$(document).off(l,t.move)}),!1)}):"toggle"===i.on?m.on("click.zoom",function(o){r?e():n(o),r=!r}):"mouseover"===i.on&&(t.init(),m.on("mouseenter.zoom",n).on("mouseleave.zoom",e).on(l,function(){i.longtouchtimer&&clearTimeout(i.longtouchtimer),t.move()})),i.touch&&(s=!1,m.on("touchstart.zoom",function(o){clearTimeout(i.longtouchtimer),i.longtouchtimer=setTimeout(function(){s?(s=!1,e()):(s=!0,o.preventDefault(),n(o.originalEvent.touches[0]||o.originalEvent.changedTouches[0]))},i.touchduration)}).on("touchmove.zoom",function(o){s&&(o.preventDefault(),t.move(o.originalEvent.touches[0]||o.originalEvent.changedTouches[0]))}).on("touchend.zoom",function(o){o.preventDefault(),i.longtouchtimer&&clearTimeout(i.longtouchtimer),e(),s=!1})),$.isFunction(i.callback)&&i.callback.call(a)},a.src=i.url)})},$.fn.zoom.defaults=f}(window.jQuery);